---
status: ACTIVE
type: Log
---

> **Context:**
> * [2025-01-15]: CRITICAL DEBUGGING SESSION - Component scoring anomalies investigation
> **Parent Documents:**
>    - [20260115-C-NEW-001.1-Component-Analysis-Report.md](./20260115-C-NEW-001.1-Component-Analysis-Report.md) (Anomalies discovered)
>    - [20260115-C-NEW-001.2a-CRITICAL-BUG-Logic-Timeouts.md](./20260115-C-NEW-001.2a-CRITICAL-BUG-Logic-Timeouts.md) (Root cause: timeout in Judge)
>    - [MASTER-ACTION-ITEM-INDEX.md](./MASTER-ACTION-ITEM-INDEX.md) (C-NEW-001.2 blocker)
> **Decision Authority:** Josh (Option A: Debug before Stage 3)

---

## Debugging Session Log - C-NEW-001.2: Component Scoring Anomalies

**Session Start:** 2025-01-15 15:30 UTC
**Status:** PHASE 1 COMPLETE â†’ TIER 2 RERUN IN PROGRESS
**Criticality:** ðŸ”´ BLOCKS STAGE 3 LAUNCH

### ðŸŽ¯ CRITICAL DISCOVERY: Phase 1 Investigation Complete

**ROOT CAUSE FOUND:** Logic Judge timeout at 85 seconds
- Qwen Rate Limiter: 6/6 battles timeout â†’ forced 0.5 score penalty
- Qwen LRU Cache: 2/6 battles timeout
- Qwen Email Validator: 1/6 battles timeout
- **Total: 9/25 Qwen battles affected (36%)**
- Mistral & gpt-oss: 0 timeouts

**FIX APPLIED:** [src/green_logic/scoring.py](src/green_logic/scoring.py#L23)
- `logic_review_timeout` changed from 85s â†’ 200s
- Backup database saved: `battles_tier2_qwen.db.backup_85s_timeout_*`
- Old Tier 2 database cleared for fresh run

**ACTION:** Tier 2 (Qwen) rerun executing with new timeout
- **Command:** `uv run python scripts/run_tier2_qwen.py`
- **Started:** 2025-01-15 15:XX UTC
- **ETA:** 3-4 hours (25 battles Ã— avg complexity)
- **Expected outcome:** Qwen Logic scores increase from 0.666 to 0.75-0.80+

---

## Investigation Roadmap

### âœ… Phase 1: Logic Scoring Deep Dive [COMPLETE]
**Objective:** Understand why Mistral (0.870) > Qwen (0.666) in Logic

**FINDING: Timeout Bug in Judge**
- Qwen: 9 timeouts (36% of battles) at 85s timeout limit
  - Rate Limiter: 6/6 timeouts â†’ 0.5 penalty
  - LRU Cache: 2/6 timeouts
  - Email Validator: 1/6 timeouts
- Mistral & gpt-oss: 0 timeouts

**ACTION TAKEN:**
- Increased `logic_review_timeout` from 85s â†’ 200s in [src/green_logic/scoring.py#L23](../../src/green_logic/scoring.py#L23)
- Cleared old Tier 2 database, began rerun
- **EARLY RESULTS (3 battles completed):** All show 0.85-0.90 logic scores with NO TIMEOUTS âœ“

**STATUS:** First 3 battles validation confirms timeout fix working. Rerun in progress (25 total expected ~3-4h).

---

### ðŸ”„ Phase 2: Architecture Scoring Deep Dive [PENDING]
**Objective:** Understand why Mistral (0.691) > Qwen (0.640) in Architecture
**Tasks:**
- [ ] Pull sample battles and inspect architecture_score
- [ ] Check if A-003 constraints are being applied correctly
- [ ] Verify complexity metrics (code length, nesting depth, etc.)
- [ ] Determine if A is measuring "constraint compliance" or "simplicity"

### Phase 3: Formula Verification
**Objective:** Validate that component scores â†’ final CIS calculation
**Tasks:**
- [ ] Pick 5 random battles, compute 0.25Ã—(R+A+T+L)
- [ ] Compare to published cis_score in evaluation field
- [ ] Identify any discrepancies or hidden transformations

### Phase 4: Red Agent Penalty Investigation
**Objective:** Determine if Red penalties explain aggregate CIS differences
**Tasks:**
- [ ] Check red_penalty_applied for Mistral vs Qwen vs gpt-oss
- [ ] See if penalties are model-specific
- [ ] Verify penalty calculation in scoring.py

### Phase 5: Decision & Remediation
**Objective:** Decide whether to proceed or recalibrate
**Tasks:**
- [ ] Synthesize findings
- [ ] Recommend formula adjustment or acceptance of limitations
- [ ] Document for Stage 3 paper

---

## Investigation Log

### 2026-01-15 06:31 UTC - PHASE 1 STARTED: Logic Scoring Anomaly

**Question:** Why is Mistral.L (0.870) > Qwen.L (0.666)?

**Hypothesis:** 
- Option 1: Logic metric is measuring "code compiles" not "code quality"
- Option 2: Mistral's simpler code happens to be syntactically cleaner
- Option 3: logic_score is derived from test pass rates, not code review
- Option 4: There's a bug in logic_score calculation

**Investigation Approach:** Inspect raw battle data to trace logic_score source

**Sample Selection:** Pull 3 Mistral, 3 Qwen battles on same task (Rate Limiter) for direct comparison

