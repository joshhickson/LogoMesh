
> logomesh@0.1.0 test
The CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.

 DEV  v3.2.4 /home/runner/workspace



 ❯ src/utils/__tests__/dataHandlers.test.js (3 tests | 2 failed) 51ms
   × Data Handling > Export Handler > exports with correct metadata structure 25ms
     → expected undefined to be 'data:application/json;base64,e30=' // Object.is equality
   ✓ Data Handling > Import Handler > normalizes legacy format thoughts 3ms
   × Data Handling > Import Handler > handles modern format with metadata 22ms
     → expected "spy" to be called with arguments: [ [ { …(8) } ] ]

Received: 

  1st spy call:

@@ -9,10 +9,11 @@
          "y": 0,
        },
        "segments": [
          {
            "content": "Test content",
+           "embedding_vector": [],
            "fields": {
              "type": "note",
            },
            "segment_id": "01HN5G4K8PMXQ0VGWX7CTBZ3YY",
            "title": "Test Segment",


Number of calls: 1

 ❯ src/utils/__tests__/VoiceInputManager.test.js (5 tests | 2 failed) 37ms
   ✓ VoiceInputManager > initializes with correct configuration 3ms
   ✓ VoiceInputManager > handles start/stop listening correctly 2ms
   × VoiceInputManager > handles speech recognition results 27ms
     → expected "spy" to be called with arguments: [ …(3) ]

Received: 

  1st spy call:

  [
-   "This is a very long sentence that should trigger automatic segmentation because it exceeds thirty characters.",
-   true,
-   true,
+   "Hello world.",
+   false,
  ]

  2nd spy call:

  [
    "This is a very long sentence that should trigger automatic segmentation because it exceeds thirty characters.",
-   true,
-   true,
+   false,
  ]


Number of calls: 2

   ✓ VoiceInputManager > handles speech recognition errors 1ms
   × VoiceInputManager > checks browser support correctly 2ms
     → Cannot delete property 'webkitSpeechRecognition' of #<Object>

stderr | src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > renders all form elements
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
The above error occurred in the <AddThoughtModal> component:

    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:15:28)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > validates title before submission
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
The above error occurred in the <AddThoughtModal> component:

    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:15:28)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > adds and updates segments
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
The above error occurred in the <AddThoughtModal> component:

    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:15:28)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > handles tag addition
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
The above error occurred in the <AddThoughtModal> component:

    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:15:28)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > creates thought with correct data structure
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
The above error occurred in the <AddThoughtModal> component:

    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:15:28)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stderr | src/components/__tests__/AddThoughtModal.test.jsx > handles voice input correctly
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
Error: Uncaught [ReferenceError: useRef is not defined]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27490:7)
    at performUnitOfWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:26599:12) ReferenceError: useRef is not defined
    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:22:27)
    at renderWithHooks (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:15486:18)
    at mountIndeterminateComponent (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:20103:13)
    at beginWork (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
The above error occurred in the <AddThoughtModal> component:

    at AddThoughtModal (/home/runner/workspace/src/components/AddThoughtModal.jsx:15:28)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.


 ❯ src/components/__tests__/AddThoughtModal.test.jsx (6 tests | 6 failed) 156ms
   × AddThoughtModal > renders all form elements 116ms
     → useRef is not defined
   × AddThoughtModal > validates title before submission 6ms
     → useRef is not defined
   × AddThoughtModal > adds and updates segments 13ms
     → useRef is not defined
   × AddThoughtModal > handles tag addition 6ms
     → useRef is not defined
   × AddThoughtModal > creates thought with correct data structure 8ms
     → useRef is not defined
   × handles voice input correctly 4ms
     → useRef is not defined







 ❯ src/services/__tests__/graphService.test.js (2 tests | 1 failed) 22ms
   × graphService > findThoughtsByTag returns thoughts with matching tag 20ms
     → expected [] to deeply equal [ { properties: { …(2) } } ]
   ✓ graphService > findThoughtsByTag returns empty array for non-existent tag 1ms
stderr | src/components/__tests__/ThoughtDetailPanel.test.jsx > ThoughtDetailPanel > updates thought when edited
Error: Uncaught [TypeError: onUpdate is not a function]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at invokeGuardedCallbackAndCatchFirstError (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4291:25)
    at executeDispatch (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:9041:3) TypeError: onUpdate is not a function
    at handleThoughtEdit (/home/runner/workspace/src/components/ThoughtDetailPanel.jsx:8:5)
    at onChange (/home/runner/workspace/src/components/ThoughtDetailPanel.jsx:69:26)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
Error: Uncaught [TypeError: onUpdate is not a function]
    at reportException (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLInputElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLInputElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLInputElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at /home/runner/workspace/node_modules/@testing-library/dom/dist/events.js:19:20
    at /home/runner/workspace/node_modules/@testing-library/react/dist/pure.js:108:16
    at /home/runner/workspace/node_modules/@testing-library/react/dist/act-compat.js:48:24
    at act (/home/runner/workspace/node_modules/react/cjs/react.development.js:2512:16) TypeError: onUpdate is not a function
    at handleThoughtEdit (/home/runner/workspace/src/components/ThoughtDetailPanel.jsx:8:5)
    at onChange (/home/runner/workspace/src/components/ThoughtDetailPanel.jsx:69:26)
    at HTMLUnknownElement.callCallback (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/runner/workspace/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:4213:16)

 ❯ src/components/__tests__/ThoughtDetailPanel.test.jsx (4 tests | 4 failed) 385ms
   × ThoughtDetailPanel > renders thought details correctly 111ms
     → Unable to find an element with the text: Test Segment. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="w-1/4 p-4 border-l bg-gray-50 dark:bg-gray-800 overflow-y-auto"
    >
      <input
        class="text-lg font-bold mb-2 w-full bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none"
        type="text"
        value="Test Thought"
      />
      <textarea
        class="mb-2 w-full bg-transparent border border-transparent hover:border-gray-300 focus:border-blue-500 outline-none resize-y"
      >
        Test description
      </textarea>
      <p
        class="mb-2 text-sm text-gray-500"
      >
        Created: 
        Invalid Date
      </p>
      <div
        class="mb-4"
      >
        <strong>
          Tags:
        </strong>
        <ul
          class="mt-1"
        >
          <li
            style="color: rgb(16, 185, 129);"
          >
            test
          </li>
        </ul>
      </div>
      <div>
        <h3
          class="text-md font-semibold mb-2"
        >
          Segments:
        </h3>
        <div
          class="mb-4 border rounded-lg p-4 bg-gray-50 dark:bg-gray-800"
        >
          <div
            class="flex justify-between items-center mb-2"
          >
            <input
              class="font-medium w-full bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none"
              placeholder="Segment Title"
              type="text"
              value="Test Segment"
            />
            <button
              class="text-red-500 hover:text-red-700 ml-2"
              title="Delete Segment"
            >
              ×
            </button>
          </div>
          <textarea
            class="text-sm mb-3 w-full bg-transparent border rounded p-2 hover:border-gray-300 focus:border-blue-500 outline-none resize-y"
            placeholder="Segment Content"
          >
            Test content
          </textarea>
          <div
            class="flex gap-2 mb-3"
          >
            <select
              class="w-1/2 bg-transparent border rounded p-2 text-sm"
            >
              <option
                value="Fact"
              >
                Fact
              </option>
              <option
                value="Idea"
              >
                Idea
              </option>
              <option
                value="Theme"
              >
                Theme
              </option>
              <option
                value="Goal"
              >
                Goal
              </option>
            </select>
            <input
              class="w-1/2 bg-transparent border rounded p-2 text-sm"
              placeholder="Cluster ID"
              type="text"
              value=""
            />
          </div>
          <div
            class="space-y-2"
          >
            <div
              class="flex justify-between items-center"
            >
              <h4
                class="text-sm font-medium"
              >
                Fields
              </h4>
              <button
                class="text-sm text-blue-500 hover:text-blue-700"
              >
                + Add Field
              </button>
            </div>
            <div
              class="flex items-center gap-2 text-sm"
            >
              <span
                class="font-medium min-w-[100px]"
              >
                type
                :
              </span>
              <input
                class="flex-1 bg-transparent border rounded px-2 py-1"
                type="text"
                value="note"
              />
              <button
                class="text-red-500 hover:text-red-700"
                title="Remove Field"
              >
                ×
              </button>
            </div>
            <div
              class="flex items-center gap-2 text-sm"
            >
              <span
                class="font-medium min-w-[100px]"
              >
                location
                :
              </span>
              <input
                class="flex-1 bg-transparent border rounded px-2 py-1"
                type="text"
                value="home"
              />
              <button
                class="text-red-500 hover:text-red-700"
                title="Remove Field"
              >
                ×
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
   × ThoughtDetailPanel > displays segment fields 58ms
     → Unable to find an element with the text: note. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="w-1/4 p-4 border-l bg-gray-50 dark:bg-gray-800 overflow-y-auto"
    >
      <input
        class="text-lg font-bold mb-2 w-full bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none"
        type="text"
        value="Test Thought"
      />
      <textarea
        class="mb-2 w-full bg-transparent border border-transparent hover:border-gray-300 focus:border-blue-500 outline-none resize-y"
      >
        Test description
      </textarea>
      <p
        class="mb-2 text-sm text-gray-500"
      >
        Created: 
        Invalid Date
      </p>
      <div
        class="mb-4"
      >
        <strong>
          Tags:
        </strong>
        <ul
          class="mt-1"
        >
          <li
            style="color: rgb(16, 185, 129);"
          >
            test
          </li>
        </ul>
      </div>
      <div>
        <h3
          class="text-md font-semibold mb-2"
        >
          Segments:
        </h3>
        <div
          class="mb-4 border rounded-lg p-4 bg-gray-50 dark:bg-gray-800"
        >
          <div
            class="flex justify-between items-center mb-2"
          >
            <input
              class="font-medium w-full bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none"
              placeholder="Segment Title"
              type="text"
              value="Test Segment"
            />
            <button
              class="text-red-500 hover:text-red-700 ml-2"
              title="Delete Segment"
            >
              ×
            </button>
          </div>
          <textarea
            class="text-sm mb-3 w-full bg-transparent border rounded p-2 hover:border-gray-300 focus:border-blue-500 outline-none resize-y"
            placeholder="Segment Content"
          >
            Test content
          </textarea>
          <div
            class="flex gap-2 mb-3"
          >
            <select
              class="w-1/2 bg-transparent border rounded p-2 text-sm"
            >
              <option
                value="Fact"
              >
                Fact
              </option>
              <option
                value="Idea"
              >
                Idea
              </option>
              <option
                value="Theme"
              >
                Theme
              </option>
              <option
                value="Goal"
              >
                Goal
              </option>
            </select>
            <input
              class="w-1/2 bg-transparent border rounded p-2 text-sm"
              placeholder="Cluster ID"
              type="text"
              value=""
            />
          </div>
          <div
            class="space-y-2"
          >
            <div
              class="flex justify-between items-center"
            >
              <h4
                class="text-sm font-medium"
              >
                Fields
              </h4>
              <button
                class="text-sm text-blue-500 hover:text-blue-700"
              >
                + Add Field
              </button>
            </div>
            <div
              class="flex items-center gap-2 text-sm"
            >
              <span
                class="font-medium min-w-[100px]"
              >
                type
                :
              </span>
              <input
                class="flex-1 bg-transparent border rounded px-2 py-1"
                type="text"
                value="note"
              />
              <button
                class="text-red-500 hover:text-red-700"
                title="Remove Field"
              >
                ×
              </button>
            </div>
            <div
              class="flex items-center gap-2 text-sm"
            >
              <span
                class="font-medium min-w-[100px]"
              >
                location
                :
              </span>
              <input
                class="flex-1 bg-transparent border rounded px-2 py-1"
                type="text"
                value="home"
              />
              <button
                class="text-red-500 hover:text-red-700"
                title="Remove Field"
              >
                ×
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
   × ThoughtDetailPanel > shows tags with correct colors 103ms
     → expect(element).toHaveStyle()

- Expected
+ Received

- backgroundColor: rgb(16, 185, 129);
   × ThoughtDetailPanel > updates thought when edited 109ms
     → expected "spy" to be called at least once
 ❯ src/components/__tests__/Sidebar.test.jsx (4 tests | 2 failed) 516ms
   ✓ Sidebar > renders all thoughts initially 92ms
   × Sidebar > filters thoughts based on field name 371ms
     → Unable to find an accessible element with the role "combobox"

Here are the accessible roles:

  heading:

  Name "Thought List":
  <h2
    class="text-lg font-bold"
  />

  Name "Filter Segments":
  <h3
    class="text-md font-semibold mb-2"
  />

  Name "Batch Edit":
  <h3
    class="text-md font-semibold mb-2"
  />

  --------------------------------------------------
  button:

  Name "Toggle Mode":
  <button
    class="px-2 py-1 bg-gray-300 dark:bg-gray-600 rounded"
  />

  Name "Add New Thought":
  <button
    class="w-full mb-2 px-4 py-2 bg-blue-500 text-white rounded"
  />

  Name "Export All":
  <button
    class="w-full mb-2 px-4 py-2 bg-green-500 text-white rounded"
  />

  Name "Export Filtered":
  <button
    class="w-full mb-2 px-4 py-2 bg-yellow-500 text-black rounded"
  />

  Name "Clear Cache":
  <button
    class="w-full mb-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
  />

  Name "View Cache":
  <button
    class="w-full mb-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
  />

  Name "Export Errors (0)":
  <button
    class="w-full mb-2 px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600"
  />

  Name "Reset Filters":
  <button
    class="w-full bg-gray-400 text-black py-1 rounded"
  />

  Name "Add Tag to Filtered":
  <button
    class="w-full mb-2 px-4 py-1 bg-purple-500 text-white rounded"
  />

  Name "Change Color of Filtered":
  <button
    class="w-full px-4 py-1 bg-pink-500 text-white rounded"
  />

  --------------------------------------------------
  listbox:

  Name "":
  <select
    class="w-full mb-2 p-2 border rounded"
    multiple=""
  />

  Name "":
  <select
    class="w-full mb-4 p-2 border rounded"
    multiple=""
  />

  --------------------------------------------------
  option:

  Name "type":
  <option
    value="type"
  />

  Name "domain":
  <option
    value="domain"
  />

  Name "text":
  <option
    value="text"
  />

  Name "location":
  <option
    value="location"
  />

  Name "date":
  <option
    value="date"
  />

  Name "numeric":
  <option
    value="numeric"
  />

  --------------------------------------------------
  textbox:

  Name "":
  <input
    class="w-full mb-2 p-2 border rounded"
    placeholder="Enter value to match"
    type="text"
    value=""
  />

  --------------------------------------------------
  strong:

  Name "":
  <strong />

  --------------------------------------------------
  list:

  Name "":
  <ul
    class="list-disc list-inside"
  />

  Name "":
  <ul />

  Name "":
  <ul
    class="ml-3 mt-1 text-sm"
  />

  Name "":
  <ul
    class="ml-3 mt-1 text-sm"
  />

  --------------------------------------------------
  listitem:

  Name "":
  <li />

  Name "":
  <li
    class="mb-3"
  />

  Name "":
  <li
    class="text-gray-600 dark:text-gray-300"
  />

  Name "":
  <li
    class="mb-3"
  />

  Name "":
  <li
    class="text-gray-600 dark:text-gray-300"
  />

  --------------------------------------------------

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="w-1/4 p-4 border-r bg-gray-50 dark:bg-gray-800 overflow-y-auto"
    >
      <div
        class="flex justify-between items-center mb-4"
      >
        <span
          class="text-sm text-gray-500 dark:text-gray-400"
        >
          Schema v
          0.5
        </span>
        <h2
          class="text-lg font-bold"
        >
          Thought List
        </h2>
        <button
          class="px-2 py-1 bg-gray-300 dark:bg-gray-600 rounded"
        >
          Toggle Mode
        </button>
      </div>
      <button
        class="w-full mb-2 px-4 py-2 bg-blue-500 text-white rounded"
      >
        Add New Thought
      </button>
      <button
        class="w-full mb-2 px-4 py-2 bg-green-500 text-white rounded"
      >
        Export All
      </button>
      <button
        class="w-full mb-2 px-4 py-2 bg-yellow-500 text-black rounded"
      >
        Export Filtered
      </button>
      <input
        class="hidden"
        id="importFile"
        type="file"
      />
      <label
        class="w-full mb-4 px-4 py-2 bg-indigo-500 text-white rounded cursor-pointer block text-center"
        for="importFile"
      >
        Import from JSON
      </label>
      <button
        class="w-full mb-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
      >
        Clear Cache
      </button>
      <button
        class="w-full mb-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
      >
        View Cache
      </button>
      <button
        class="w-full mb-2 px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600"
      >
        Export Errors (
        0
        )
      </button>
      <div
        class="mb-4"
      >
        <h3
          class="text-md font-semibold mb-2"
        >
          Filter Segments
        </h3>
        <label
          class="block mb-1 font-medium"
        >
          Field Names:
        </label>
        <select
          class="w-full mb-2 p-2 border rounded"
          multiple=""
        >
          <option
            value="type"
          >
            type
          </option>
          <option
            value="domain"
          >
            domain
          </option>
        </select>
        <label
          class="block mb-1 font-medium"
        >
          Field Value:
        </label>
        <input
          class="w-full mb-2 p-2 border rounded"
          placeholder="Enter value to match"
          type="text"
          value=""
        />
        <label
          class="block mb-1 font-medium"
        >
          Field Types (soon):
        </label>
        <select
          class="w-full mb-4 p-2 border rounded"
          multiple=""
        >
          <option
            value="text"
          >
            text
          </option>
          <option
            value="location"
          >
            location
          </option>
          <option
            value="date"
          >
            date
          </option>
          <option
            value="numeric"
          >
            numeric
          </option>
        </select>
        <button
          class="w-full bg-gray-400 text-black py-1 rounded"
        >
          Reset Filters
        </button>
      </div>
      <div
        class="mb-4 text-sm text-gray-700 dark:text-gray-300"
      >
        <strong>
          Active Filters:
        </strong>
        <ul
          class="list-disc list-inside"
        >
          <li>
            None
          </li>
        </ul>
      </div>
      <ul>
        <li
          class="mb-3"
        >
          <div
            class="cursor-pointer font-semibold hover:underline"
          >
            Philosophy Thought
          </div>
          <ul
            class="ml-3 mt-1 text-sm"
          >
            <li
              class="text-gray-600 dark:text-gray-300"
            >
              - 
              Logic
            </li>
          </ul>
        </li>
        <li
          class="mb-3"
        >
          <div
            class="cursor-pointer font-semibold hover:underline"
          >
            AI Thought
          </div>
          <ul
            class="ml-3 mt-1 text-sm"
          >
            <li
              class="text-gray-600 dark:text-gray-300"
            >
              - 
              Neural Networks
            </li>
          </ul>
        </li>
      </ul>
      <div
        class="mt-6"
      >
        <h3
          class="text-md font-semibold mb-2"
        >
          Batch Edit
        </h3>
        <button
          class="w-full mb-2 px-4 py-1 bg-purple-500 text-white rounded"
        >
          Add Tag to Filtered
        </button>
        <button
          class="w-full px-4 py-1 bg-pink-500 text-white rounded"
        >
          Change Color of Filtered
        </button>
      </div>
    </div>
  </div>
</body>
   × Sidebar > resets filters when reset button clicked 27ms
     → expected "spy" to be called with arguments: [ [] ]

Received: 

  1st spy call:

  [
-   [],
+   [
+     "test-1",
+     "test-2",
+   ],
  ]

  2nd spy call:

  [
-   [],
+   [
+     "test-1",
+     "test-2",
+   ],
  ]

  3rd spy call:

  [
-   [],
+   [
+     "test-1",
+     "test-2",
+   ],
  ]

  4th spy call:

  [
-   [],
+   [
+     "test-1",
+     "test-2",
+   ],
  ]


Number of calls: 4

   ✓ Sidebar > opens add thought modal when button clicked 22ms
stderr | src/components/__tests__/Canvas.test.jsx > Canvas > renders without crashing
Warning: A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act

 ❯ src/components/__tests__/Canvas.test.jsx (1 test | 1 failed) 39ms
   × Canvas > renders without crashing 37ms
     → Unable to find an element by: [data-testid="cytoscape-mock"]

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 ✓ src/utils/__tests__/eventBus.test.js (3 tests) 4ms
stderr | src/App.test.jsx > renders main app components
Backend API not available: Error: [vitest] No "apiService" export is defined on the "./services/apiService" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///home/runner/workspace/node_modules/vitest/dist/chunks/execute.B7h3T_Hc.js:284:17)
    at Object.get (file:///home/runner/workspace/node_modules/vitest/dist/chunks/execute.B7h3T_Hc.js:330:16)
    at loadInitialData (/home/runner/workspace/src/App.jsx:103:40)
    at /home/runner/workspace/src/App.jsx:112:5
    at commitHookEffectListMount (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:23189:26)
    at commitPassiveMountOnFiber (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:24970:11)
    at commitPassiveMountEffects_complete (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:24930:9)
    at commitPassiveMountEffects_begin (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:24917:7)
    at commitPassiveMountEffects (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:24905:3)
    at flushPassiveEffectsImpl (/home/runner/workspace/node_modules/react-dom/cjs/react-dom.development.js:27078:3) {
  codeFrame: 'vi\x1B[33m.\x1B[39m\x1B[34mmock\x1B[39m(\x1B[35mimport\x1B[39m(\x1B[32m"./services/apiService"\x1B[39m)\x1B[33m,\x1B[39m \x1B[35masync\x1B[39m (importOriginal) \x1B[33m=>\x1B[39m {\n' +
    '  \x1B[35mconst\x1B[39m actual \x1B[33m=\x1B[39m \x1B[35mawait\x1B[39m \x1B[34mimportOriginal\x1B[39m()\n' +
    '  \x1B[35mreturn\x1B[39m {\n' +
    '    \x1B[33m...\x1B[39mactual\x1B[33m,\x1B[39m\n' +
    '    \x1B[90m// your mocked methods\x1B[39m\n' +
    '  }\n' +
    '})'
}

 ✓ src/App.test.jsx (1 test) 108ms

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 18 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > renders all form elements
 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > validates title before submission
 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > adds and updates segments
 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > handles tag addition
 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > creates thought with correct data structure
 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > handles voice input correctly
ReferenceError: useRef is not defined
 ❯ AddThoughtModal src/components/AddThoughtModal.jsx:22:27
     20|   const [segments, setSegments] = useState([]);
     21|   const [isListening, setIsListening] = useState(false);
     22|   const voiceManagerRef = useRef(null);
       |                           ^
     23| 
     24|   useEffect(() => {
 ❯ renderWithHooks node_modules/react-dom/cjs/react-dom.development.js:15486:18
 ❯ mountIndeterminateComponent node_modules/react-dom/cjs/react-dom.development.js:20103:13
 ❯ beginWork node_modules/react-dom/cjs/react-dom.development.js:21626:16
 ❯ beginWork$1 node_modules/react-dom/cjs/react-dom.development.js:27465:14
 ❯ performUnitOfWork node_modules/react-dom/cjs/react-dom.development.js:26599:12
 ❯ workLoopSync node_modules/react-dom/cjs/react-dom.development.js:26505:5
 ❯ renderRootSync node_modules/react-dom/cjs/react-dom.development.js:26473:7
 ❯ recoverFromConcurrentError node_modules/react-dom/cjs/react-dom.development.js:25889:20
 ❯ performConcurrentWorkOnRoot node_modules/react-dom/cjs/react-dom.development.js:25789:22

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/18]⎯

 FAIL  src/components/__tests__/Canvas.test.jsx > Canvas > renders without crashing
TestingLibraryElementError: Unable to find an element by: [data-testid="cytoscape-mock"]

Ignored nodes: comments, script, style
<body>
  <div />
</body>
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/__tests__/Canvas.test.jsx:19:12
     17|   it('renders without crashing', () => {
     18|     const { getByTestId } = render(<Canvas />);
     19|     expect(getByTestId('cytoscape-mock')).toBeInTheDocument();
       |            ^
     20|   });
     21| });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/18]⎯

 FAIL  src/components/__tests__/Sidebar.test.jsx > Sidebar > filters thoughts based on field name
TestingLibraryElementError: Unable to find an accessible element with the role "combobox"

Here are the accessible roles:

  heading:

  Name "Thought List":
  <h2
    class="text-lg font-bold"
  />

  Name "Filter Segments":
  <h3
    class="text-md font-semibold mb-2"
  />

  Name "Batch Edit":
  <h3
    class="text-md font-semibold mb-2"
  />

  --------------------------------------------------
  button:

  Name "Toggle Mode":
  <button
    class="px-2 py-1 bg-gray-300 dark:bg-gray-600 rounded"
  />

  Name "Add New Thought":
  <button
    class="w-full mb-2 px-4 py-2 bg-blue-500 text-white rounded"
  />

  Name "Export All":
  <button
    class="w-full mb-2 px-4 py-2 bg-green-500 text-white rounded"
  />

  Name "Export Filtered":
  <button
    class="w-full mb-2 px-4 py-2 bg-yellow-500 text-black rounded"
  />

  Name "Clear Cache":
  <button
    class="w-full mb-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
  />

  Name "View Cache":
  <button
    class="w-full mb-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
  />

  Name "Export Errors (0)":
  <button
    class="w-full mb-2 px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600"
  />

  Name "Reset Filters":
  <button
    class="w-full bg-gray-400 text-black py-1 rounded"
  />

  Name "Add Tag to Filtered":
  <button
    class="w-full mb-2 px-4 py-1 bg-purple-500 text-white rounded"
  />

  Name "Change Color of Filtered":
  <button
    class="w-full px-4 py-1 bg-pink-500 text-white rounded"
  />

  --------------------------------------------------
  listbox:

  Name "":
  <select
    class="w-full mb-2 p-2 border rounded"
    multiple=""
  />

  Name "":
  <select
    class="w-full mb-4 p-2 border rounded"
    multiple=""
  />

  --------------------------------------------------
  option:

  Name "type":
  <option
    value="type"
  />

  Name "domain":
  <option
    value="domain"
  />

  Name "text":
  <option
    value="text"
  />

  Name "location":
  <option
    value="location"
  />

  Name "date":
  <option
    value="date"
  />

  Name "numeric":
  <option
    value="numeric"
  />

  --------------------------------------------------
  textbox:

  Name "":
  <input
    class="w-full mb-2 p-2 border rounded"
    placeholder="Enter value to match"
    type="text"
    value=""
  />

  --------------------------------------------------
  strong:

  Name "":
  <strong />

  --------------------------------------------------
  list:

  Name "":
  <ul
    class="list-disc list-inside"
  />

  Name "":
  <ul />

  Name "":
  <ul
    class="ml-3 mt-1 text-sm"
  />

  Name "":
  <ul
    class="ml-3 mt-1 text-sm"
  />

  --------------------------------------------------
  listitem:

  Name "":
  <li />

  Name "":
  <li
    class="mb-3"
  />

  Name "":
  <li
    class="text-gray-600 dark:text-gray-300"
  />

  Name "":
  <li
    class="mb-3"
  />

  Name "":
  <li
    class="text-gray-600 dark:text-gray-300"
  />

  --------------------------------------------------

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="w-1/4 p-4 border-r bg-gray-50 dark:bg-gray-800 overflow-y-auto"
    >
      <div
        class="flex justify-between items-center mb-4"
      >
        <span
          class="text-sm text-gray-500 dark:text-gray-400"
        >
          Schema v
          0.5
        </span>
        <h2
          class="text-lg font-bold"
        >
          Thought List
        </h2>
        <button
          class="px-2 py-1 bg-gray-300 dark:bg-gray-600 rounded"
        >
          Toggle Mode
        </button>
      </div>
      <button
        class="w-full mb-2 px-4 py-2 bg-blue-500 text-white rounded"
      >
        Add New Thought
      </button>
      <button
        class="w-full mb-2 px-4 py-2 bg-green-500 text-white rounded"
      >
        Export All
      </button>
      <button
        class="w-full mb-2 px-4 py-2 bg-yellow-500 text-black rounded"
      >
        Export Filtered
      </button>
      <input
        class="hidden"
        id="importFile"
        type="file"
      />
      <label
        class="w-full mb-4 px-4 py-2 bg-indigo-500 text-white rounded cursor-pointer block text-center"
        for="importFile"
      >
        Import from JSON
      </label>
      <button
        class="w-full mb-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
      >
        Clear Cache
      </button>
      <button
        class="w-full mb-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
      >
        View Cache
      </button>
      <button
        class="w-full mb-2 px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600"
      >
        Export Errors (
        0
        )
      </button>
      <div
        class="mb-4"
      >
        <h3
          class="text-md font-semibold mb-2"
        >
          Filter Segments
        </h3>
        <label
          class="block mb-1 font-medium"
        >
          Field Names:
        </label>
        <select
          class="w-full mb-2 p-2 border rounded"
          multiple=""
        >
          <option
            value="type"
          >
            type
          </option>
          <option
            value="domain"
          >
            domain
          </option>
        </select>
        <label
          class="block mb-1 font-medium"
        >
          Field Value:
        </label>
        <input
          class="w-full mb-2 p-2 border rounded"
          placeholder="Enter value to match"
          type="text"
          value=""
        />
        <label
          class="block mb-1 font-medium"
        >
          Field Types (soon):
        </label>
        <select
          class="w-full mb-4 p-2 border rounded"
          multiple=""
        >
          <option
            value="text"
          >
            text
          </option>
          <option
            value="location"
          >
            location
          </option>
          <option
            value="date"
          >
            date
          </option>
          <option
            value="numeric"
          >
            numeric
          </option>
        </select>
        <button
          class="w-full bg-gray-400 text-black py-1 rounded"
        >
          Reset Filters
        </button>
      </div>
      <div
        class="mb-4 text-sm text-gray-700 dark:text-gray-300"
      >
        <strong>
          Active Filters:
        </strong>
        <ul
          class="list-disc list-inside"
        >
          <li>
            None
          </li>
        </ul>
      </div>
      <ul>
        <li
          class="mb-3"
        >
          <div
            class="cursor-pointer font-semibold hover:underline"
          >
            Philosophy Thought
          </div>
          <ul
            class="ml-3 mt-1 text-sm"
          >
            <li
              class="text-gray-600 dark:text-gray-300"
            >
              - 
              Logic
            </li>
          </ul>
        </li>
        <li
          class="mb-3"
        >
          <div
            class="cursor-pointer font-semibold hover:underline"
          >
            AI Thought
          </div>
          <ul
            class="ml-3 mt-1 text-sm"
          >
            <li
              class="text-gray-600 dark:text-gray-300"
            >
              - 
              Neural Networks
            </li>
          </ul>
        </li>
      </ul>
      <div
        class="mt-6"
      >
        <h3
          class="text-md font-semibold mb-2"
        >
          Batch Edit
        </h3>
        <button
          class="w-full mb-2 px-4 py-1 bg-purple-500 text-white rounded"
        >
          Add Tag to Filtered
        </button>
        <button
          class="w-full px-4 py-1 bg-pink-500 text-white rounded"
        >
          Change Color of Filtered
        </button>
      </div>
    </div>
  </div>
</body>
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/__tests__/Sidebar.test.jsx:47:27
     45|   test('filters thoughts based on field name', () => {
     46|     render(<Sidebar {...mockProps} />);
     47|     const select = screen.getByRole('combobox', { multiple: true });
       |                           ^
     48|     fireEvent.change(select, { target: { value: 'domain' } });
     49|     expect(mockProps.setActiveFilters).toHaveBeenCalled();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/18]⎯

 FAIL  src/components/__tests__/Sidebar.test.jsx > Sidebar > resets filters when reset button clicked
AssertionError: expected "spy" to be called with arguments: [ [] ]

Received: 

  1st spy call:

  [
-   [],
+   [
+     "test-1",
+     "test-2",
+   ],
  ]

  2nd spy call:

  [
-   [],
+   [
+     "test-1",
+     "test-2",
+   ],
  ]

  3rd spy call:

  [
-   [],
+   [
+     "test-1",
+     "test-2",
+   ],
  ]

  4th spy call:

  [
-   [],
+   [
+     "test-1",
+     "test-2",
+   ],
  ]


Number of calls: 4

 ❯ src/components/__tests__/Sidebar.test.jsx:56:40
     54|     const resetButton = screen.getByText('Reset Filters');
     55|     fireEvent.click(resetButton);
     56|     expect(mockProps.setActiveFilters).toHaveBeenCalledWith([]);
       |                                        ^
     57|   });
     58| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/18]⎯

 FAIL  src/components/__tests__/ThoughtDetailPanel.test.jsx > ThoughtDetailPanel > renders thought details correctly
TestingLibraryElementError: Unable to find an element with the text: Test Segment. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="w-1/4 p-4 border-l bg-gray-50 dark:bg-gray-800 overflow-y-auto"
    >
      <input
        class="text-lg font-bold mb-2 w-full bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none"
        type="text"
        value="Test Thought"
      />
      <textarea
        class="mb-2 w-full bg-transparent border border-transparent hover:border-gray-300 focus:border-blue-500 outline-none resize-y"
      >
        Test description
      </textarea>
      <p
        class="mb-2 text-sm text-gray-500"
      >
        Created: 
        Invalid Date
      </p>
      <div
        class="mb-4"
      >
        <strong>
          Tags:
        </strong>
        <ul
          class="mt-1"
        >
          <li
            style="color: rgb(16, 185, 129);"
          >
            test
          </li>
        </ul>
      </div>
      <div>
        <h3
          class="text-md font-semibold mb-2"
        >
          Segments:
        </h3>
        <div
          class="mb-4 border rounded-lg p-4 bg-gray-50 dark:bg-gray-800"
        >
          <div
            class="flex justify-between items-center mb-2"
          >
            <input
              class="font-medium w-full bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none"
              placeholder="Segment Title"
              type="text"
              value="Test Segment"
            />
            <button
              class="text-red-500 hover:text-red-700 ml-2"
              title="Delete Segment"
            >
              ×
            </button>
          </div>
          <textarea
            class="text-sm mb-3 w-full bg-transparent border rounded p-2 hover:border-gray-300 focus:border-blue-500 outline-none resize-y"
            placeholder="Segment Content"
          >
            Test content
          </textarea>
          <div
            class="flex gap-2 mb-3"
          >
            <select
              class="w-1/2 bg-transparent border rounded p-2 text-sm"
            >
              <option
                value="Fact"
              >
                Fact
              </option>
              <option
                value="Idea"
              >
                Idea
              </option>
              <option
                value="Theme"
              >
                Theme
              </option>
              <option
                value="Goal"
              >
                Goal
              </option>
            </select>
            <input
              class="w-1/2 bg-transparent border rounded p-2 text-sm"
              placeholder="Cluster ID"
              type="text"
              value=""
            />
          </div>
          <div
            class="space-y-2"
          >
            <div
              class="flex justify-between items-center"
            >
              <h4
                class="text-sm font-medium"
              >
                Fields
              </h4>
              <button
                class="text-sm text-blue-500 hover:text-blue-700"
              >
                + Add Field
              </button>
            </div>
            <div
              class="flex items-center gap-2 text-sm"
            >
              <span
                class="font-medium min-w-[100px]"
              >
                type
                :
              </span>
              <input
                class="flex-1 bg-transparent border rounded px-2 py-1"
                type="text"
                value="note"
              />
              <button
                class="text-red-500 hover:text-red-700"
                title="Remove Field"
              >
                ×
              </button>
            </div>
            <div
              class="flex items-center gap-2 text-sm"
            >
              <span
                class="font-medium min-w-[100px]"
              >
                location
                :
              </span>
              <input
                class="flex-1 bg-transparent border rounded px-2 py-1"
                type="text"
                value="home"
              />
              <button
                class="text-red-500 hover:text-red-700"
                title="Remove Field"
              >
                ×
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/__tests__/ThoughtDetailPanel.test.jsx:32:19
     30|     expect(screen.getByDisplayValue('Test Thought')).toBeInTheDocument();
     31|     expect(screen.getByText('Test description')).toBeInTheDocument();
     32|     expect(screen.getByText('Test Segment')).toBeInTheDocument();
       |                   ^
     33|   });
     34| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/18]⎯

 FAIL  src/components/__tests__/ThoughtDetailPanel.test.jsx > ThoughtDetailPanel > displays segment fields
TestingLibraryElementError: Unable to find an element with the text: note. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
<body>
  <div>
    <div
      class="w-1/4 p-4 border-l bg-gray-50 dark:bg-gray-800 overflow-y-auto"
    >
      <input
        class="text-lg font-bold mb-2 w-full bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none"
        type="text"
        value="Test Thought"
      />
      <textarea
        class="mb-2 w-full bg-transparent border border-transparent hover:border-gray-300 focus:border-blue-500 outline-none resize-y"
      >
        Test description
      </textarea>
      <p
        class="mb-2 text-sm text-gray-500"
      >
        Created: 
        Invalid Date
      </p>
      <div
        class="mb-4"
      >
        <strong>
          Tags:
        </strong>
        <ul
          class="mt-1"
        >
          <li
            style="color: rgb(16, 185, 129);"
          >
            test
          </li>
        </ul>
      </div>
      <div>
        <h3
          class="text-md font-semibold mb-2"
        >
          Segments:
        </h3>
        <div
          class="mb-4 border rounded-lg p-4 bg-gray-50 dark:bg-gray-800"
        >
          <div
            class="flex justify-between items-center mb-2"
          >
            <input
              class="font-medium w-full bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 outline-none"
              placeholder="Segment Title"
              type="text"
              value="Test Segment"
            />
            <button
              class="text-red-500 hover:text-red-700 ml-2"
              title="Delete Segment"
            >
              ×
            </button>
          </div>
          <textarea
            class="text-sm mb-3 w-full bg-transparent border rounded p-2 hover:border-gray-300 focus:border-blue-500 outline-none resize-y"
            placeholder="Segment Content"
          >
            Test content
          </textarea>
          <div
            class="flex gap-2 mb-3"
          >
            <select
              class="w-1/2 bg-transparent border rounded p-2 text-sm"
            >
              <option
                value="Fact"
              >
                Fact
              </option>
              <option
                value="Idea"
              >
                Idea
              </option>
              <option
                value="Theme"
              >
                Theme
              </option>
              <option
                value="Goal"
              >
                Goal
              </option>
            </select>
            <input
              class="w-1/2 bg-transparent border rounded p-2 text-sm"
              placeholder="Cluster ID"
              type="text"
              value=""
            />
          </div>
          <div
            class="space-y-2"
          >
            <div
              class="flex justify-between items-center"
            >
              <h4
                class="text-sm font-medium"
              >
                Fields
              </h4>
              <button
                class="text-sm text-blue-500 hover:text-blue-700"
              >
                + Add Field
              </button>
            </div>
            <div
              class="flex items-center gap-2 text-sm"
            >
              <span
                class="font-medium min-w-[100px]"
              >
                type
                :
              </span>
              <input
                class="flex-1 bg-transparent border rounded px-2 py-1"
                type="text"
                value="note"
              />
              <button
                class="text-red-500 hover:text-red-700"
                title="Remove Field"
              >
                ×
              </button>
            </div>
            <div
              class="flex items-center gap-2 text-sm"
            >
              <span
                class="font-medium min-w-[100px]"
              >
                location
                :
              </span>
              <input
                class="flex-1 bg-transparent border rounded px-2 py-1"
                type="text"
                value="home"
              />
              <button
                class="text-red-500 hover:text-red-700"
                title="Remove Field"
              >
                ×
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
 ❯ Object.getElementError node_modules/@testing-library/dom/dist/config.js:37:19
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:76:38
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:52:17
 ❯ node_modules/@testing-library/dom/dist/query-helpers.js:95:19
 ❯ src/components/__tests__/ThoughtDetailPanel.test.jsx:41:19
     39| 
     40|     expect(screen.getByText('type:')).toBeInTheDocument();
     41|     expect(screen.getByText('note')).toBeInTheDocument();
       |                   ^
     42|     expect(screen.getByText('location:')).toBeInTheDocument();
     43|     expect(screen.getByText('home')).toBeInTheDocument();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/18]⎯

 FAIL  src/components/__tests__/ThoughtDetailPanel.test.jsx > ThoughtDetailPanel > shows tags with correct colors
Error: expect(element).toHaveStyle()

- Expected
+ Received

- backgroundColor: rgb(16, 185, 129);
 ❯ src/components/__tests__/ThoughtDetailPanel.test.jsx:52:17
     50| 
     51|     const tag = screen.getByText('test');
     52|     expect(tag).toHaveStyle({ backgroundColor: '#10b981' });
       |                 ^
     53|   });
     54| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/18]⎯

 FAIL  src/components/__tests__/ThoughtDetailPanel.test.jsx > ThoughtDetailPanel > updates thought when edited
AssertionError: expected "spy" to be called at least once
 ❯ src/components/__tests__/ThoughtDetailPanel.test.jsx:63:29
     61|     fireEvent.change(titleInput, { target: { value: 'Updated Title' } });
     62| 
     63|     expect(mockSetThoughts).toHaveBeenCalled();
       |                             ^
     64|     expect(mockSetThoughts).toHaveBeenCalledWith(expect.any(Function));
     65|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/18]⎯

 FAIL  src/services/__tests__/graphService.test.js > graphService > findThoughtsByTag returns thoughts with matching tag
AssertionError: expected [] to deeply equal [ { properties: { …(2) } } ]

- Expected
+ Received

- [
-   {
-     "properties": {
-       "tags": [
-         {
-           "color": "#000",
-           "name": "tag1",
-         },
-       ],
-       "thought_bubble_id": "01HN5G4K8PMXQ0VGWX7CTBZ3YV",
-     },
-   },
- ]
+ []

 ❯ src/services/__tests__/graphService.test.js:17:21
     15|   test('findThoughtsByTag returns thoughts with matching tag', async () => {
     16|     const results = await graphService.findThoughtsByTag('tag1');
     17|     expect(results).toEqual([{ properties: mockThoughts[0] }]);
       |                     ^
     18|   });
     19| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/18]⎯

 FAIL  src/utils/__tests__/VoiceInputManager.test.js > VoiceInputManager > handles speech recognition results
AssertionError: expected "spy" to be called with arguments: [ …(3) ]

Received: 

  1st spy call:

  [
-   "This is a very long sentence that should trigger automatic segmentation because it exceeds thirty characters.",
-   true,
-   true,
+   "Hello world.",
+   false,
  ]

  2nd spy call:

  [
    "This is a very long sentence that should trigger automatic segmentation because it exceeds thirty characters.",
-   true,
-   true,
+   false,
  ]


Number of calls: 2

 ❯ src/utils/__tests__/VoiceInputManager.test.js:82:32
     80|     };
     81|     mockRecognition.onresult(longResults);
     82|     expect(onTranscriptUpdate).toHaveBeenCalledWith(
       |                                ^
     83|       'This is a very long sentence that should trigger automatic segmentation because it exceeds thirt…
     84|       true,

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/18]⎯

 FAIL  src/utils/__tests__/VoiceInputManager.test.js > VoiceInputManager > checks browser support correctly
TypeError: Cannot delete property 'webkitSpeechRecognition' of #<Object>
 ❯ src/utils/__tests__/VoiceInputManager.test.js:105:5
    103|     expect(localManager.isSupported()).toBe(true);
    104| 
    105|     delete window.webkitSpeechRecognition;
       |     ^
    106|     expect(localManager.isSupported()).toBe(false);
    107|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/18]⎯

 FAIL  src/utils/__tests__/dataHandlers.test.js > Data Handling > Export Handler > exports with correct metadata structure
AssertionError: expected undefined to be 'data:application/json;base64,e30=' // Object.is equality

- Expected: 
"data:application/json;base64,e30="

+ Received: 
undefined

 ❯ src/utils/__tests__/dataHandlers.test.js:59:31
     57|       expect(appendChildSpy).toHaveBeenCalled();
     58|       const anchorNode = appendChildSpy.mock.calls[0][0];
     59|       expect(anchorNode.href).toBe(mockUrl);
       |                               ^
     60|     });
     61|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/18]⎯

 FAIL  src/utils/__tests__/dataHandlers.test.js > Data Handling > Import Handler > handles modern format with metadata
AssertionError: expected "spy" to be called with arguments: [ [ { …(8) } ] ]

Received: 

  1st spy call:

@@ -9,10 +9,11 @@
          "y": 0,
        },
        "segments": [
          {
            "content": "Test content",
+           "embedding_vector": [],
            "fields": {
              "type": "note",
            },
            "segment_id": "01HN5G4K8PMXQ0VGWX7CTBZ3YY",
            "title": "Test Segment",


Number of calls: 1

 ❯ src/utils/__tests__/dataHandlers.test.js:138:24
    136|       fileReader.onload({ target: { result: fileReader.result } });
    137| 
    138|       expect(callback).toHaveBeenCalledWith(mockThoughts);
       |                        ^
    139|     });
    140|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/18]⎯

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Unhandled Errors ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Uncaught Exception ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
TypeError: onUpdate is not a function
 ❯ handleThoughtEdit src/components/ThoughtDetailPanel.jsx:8:5
      6| function ThoughtDetailPanel({ thought, onUpdate, refreshThoughts }) {
      7|   const handleThoughtEdit = (field, value) => {
      8|     onUpdate(thought.thought_bubble_id, { [field]: value });
       |     ^
      9|   };
     10| 
 ❯ onChange src/components/ThoughtDetailPanel.jsx:69:26
 ❯ HTMLUnknownElement.callCallback node_modules/react-dom/cjs/react-dom.development.js:4164:14
 ❯ HTMLUnknownElement.callTheUserObjectsOperation node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30
 ❯ innerInvokeEventListeners node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25
 ❯ invokeEventListeners node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3
 ❯ HTMLUnknownElementImpl._dispatch node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9
 ❯ HTMLUnknownElementImpl.dispatchEvent node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17
 ❯ HTMLUnknownElement.dispatchEvent node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34
 ❯ Object.invokeGuardedCallbackDev node_modules/react-dom/cjs/react-dom.development.js:4213:16

This error originated in "src/components/__tests__/ThoughtDetailPanel.test.jsx" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
The latest test that might've caused the error is "updates thought when edited". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯


 Test Files  7 failed | 2 passed (9)
      Tests  18 failed | 11 passed (29)
     Errors  1 error
   Start at  22:10:11
   Duration  10.28s (transform 663ms, setup 3.63s, collect 2.25s, tests 1.32s, environment 13.89s, prepare 2.85s)

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
