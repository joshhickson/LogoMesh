 RERUN  rerun failed 


 ❯ src/utils/__tests__/VoiceInputManager.test.js (5 tests | 5 failed) 11ms
   × VoiceInputManager > initializes with correct configuration 7ms
     → jest is not defined
   × VoiceInputManager > handles start/stop listening correctly 1ms
     → jest is not defined
   × VoiceInputManager > handles speech recognition results 0ms
     → jest is not defined
   × VoiceInputManager > handles speech recognition errors 1ms
     → jest is not defined
   × VoiceInputManager > checks browser support correctly 0ms
     → jest is not defined
 ❯ src/utils/__tests__/eventBus.test.js (3 tests | 1 failed) 12ms
   ✓ eventBus > newBubbleId generates unique IDs 2ms
   ✓ eventBus > newSegmentId generates unique IDs 0ms
   × eventBus > IDs follow expected format 8ms
     → expected 'thought_1750480612288_k5xdb2c8j' to match /^tb_[a-zA-Z0-9]+$/
 ❯ src/services/__tests__/graphService.test.js (2 tests | 1 failed) 15ms
   × graphService > findThoughtsByTag returns thoughts with matching tag 13ms
     → expected [] to deeply equal [ { properties: { …(2) } } ]
   ✓ graphService > findThoughtsByTag returns empty array for non-existent tag 0ms




 ❯ src/components/__tests__/AddThoughtModal.test.jsx (6 tests | 6 failed) 16ms
   × AddThoughtModal > renders all form elements 8ms
     → jest is not defined
   × AddThoughtModal > validates title before submission 1ms
     → jest is not defined
   × AddThoughtModal > adds and updates segments 1ms
     → jest is not defined
   × AddThoughtModal > handles tag addition 1ms
     → jest is not defined
   × AddThoughtModal > creates thought with correct data structure 1ms
     → jest is not defined
   × handles voice input correctly 1ms
     → jest is not defined


 ❯ src/App.test.js [queued]

 ❯ src/App.test.js [queued]
 ❯ src/components/__tests__/Canvas.test.jsx [queued]

 ❯ src/App.test.js [queued]
 ❯ src/components/__tests__/Canvas.test.jsx [queued]

 ❯ src/App.test.js [queued]
 ❯ src/components/__tests__/Canvas.test.jsx [queued]

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Suites 5 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/utils/__tests__/dataHandlers.test.js [ src/utils/__tests__/dataHandlers.test.js ]
ReferenceError: jest is not defined
 ❯ src/utils/__tests__/dataHandlers.test.js:7:1
      5| 
      6| // Mock eventBus functions
      7| jest.mock('../eventBus', () => ({
       | ^
      8|   newBubbleId: jest.fn().mockReturnValue('test-bubble-id'),
      9|   newSegmentId: jest.fn().mockReturnValue('test-segment-id'),

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/18]⎯

 FAIL  src/components/__tests__/ThoughtDetailPanel.test.jsx [ src/components/__tests__/ThoughtDetailPanel.test.jsx ]
ReferenceError: jest is not defined
 ❯ src/components/__tests__/ThoughtDetailPanel.test.jsx:23:27
     21|   };
     22| 
     23|   const mockSetThoughts = jest.fn();
       |                           ^
     24| 
     25|   test('renders thought details correctly', () => {

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/18]⎯

 FAIL  src/components/__tests__/Sidebar.test.jsx [ src/components/__tests__/Sidebar.test.jsx ]
ReferenceError: jest is not defined
 ❯ src/components/__tests__/Sidebar.test.jsx:32:18
     30|   const mockProps = {
     31|     thoughts: mockThoughts,
     32|     setThoughts: jest.fn(),
       |                  ^
     33|     setSelectedThought: jest.fn(),
     34|     setShowModal: jest.fn(),

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/18]⎯

 FAIL  src/components/__tests__/Canvas.test.jsx [ src/components/__tests__/Canvas.test.jsx ]
ReferenceError: jest is not defined
 ❯ src/components/__tests__/Canvas.test.jsx:6:1
      4| import Canvas from '../Canvas';
      5| 
      6| jest.mock('react-cytoscapejs');
       | ^
      7| jest.mock('cytoscape-cose-bilkent');
      8| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/18]⎯

 FAIL  src/App.test.js [ src/App.test.js ]
RollupError: Parse failure: Expression expected
At file: /home/runner/workspace/src/App.test.js:6:12
  File: /home/runner/workspace/src/App.test.js:6:12
  4  |  jest.mock('./components/Canvas', () => {
  5  |    return function MockCanvas() {
  6  |      return <div data-testid="canvas-mock" />;
     |             ^
  7  |    };
  8  |  });
 ❯ getRollupError node_modules/vitest/node_modules/rollup/dist/es/shared/parseAst.js:401:41
 ❯ convertProgram node_modules/vitest/node_modules/rollup/dist/es/shared/parseAst.js:1089:26
 ❯ parseAstAsync node_modules/vitest/node_modules/rollup/dist/es/shared/parseAst.js:2075:106
 ❯ ssrTransformScript node_modules/vitest/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:25598:11

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/18]⎯


⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 13 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > renders all form elements
 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > validates title before submission
 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > adds and updates segments
 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > handles tag addition
 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > AddThoughtModal > creates thought with correct data structure
ReferenceError: jest is not defined
 ❯ src/components/__tests__/AddThoughtModal.test.jsx:13:20
     11|     // mockCreateThought = jest.fn();
     12|     // mockOnClose = jest.fn();
     13|     window.alert = jest.fn();
       |                    ^
     14|   });
     15| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/18]⎯

 FAIL  src/components/__tests__/AddThoughtModal.test.jsx > handles voice input correctly
ReferenceError: jest is not defined
 ❯ src/components/__tests__/AddThoughtModal.test.jsx:137:29
    135| });
    136| test('handles voice input correctly', () => {
    137|   const mockCreateThought = jest.fn();
       |                             ^
    138|   const mockOnClose = jest.fn();
    139|   const { getByTitle, getByPlaceholderText } = render(

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/18]⎯

 FAIL  src/utils/__tests__/VoiceInputManager.test.js > VoiceInputManager > initializes with correct configuration
 FAIL  src/utils/__tests__/VoiceInputManager.test.js > VoiceInputManager > handles start/stop listening correctly
 FAIL  src/utils/__tests__/VoiceInputManager.test.js > VoiceInputManager > handles speech recognition results
 FAIL  src/utils/__tests__/VoiceInputManager.test.js > VoiceInputManager > handles speech recognition errors
 FAIL  src/utils/__tests__/VoiceInputManager.test.js > VoiceInputManager > checks browser support correctly
ReferenceError: jest is not defined
 ❯ src/utils/__tests__/VoiceInputManager.test.js:9:5
      7| 
      8|   beforeEach(() => {
      9|     onTranscriptUpdate = jest.fn();
       |     ^
     10|     onError = jest.fn();
     11| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/18]⎯

 FAIL  src/services/__tests__/graphService.test.js > graphService > findThoughtsByTag returns thoughts with matching tag
AssertionError: expected [] to deeply equal [ { properties: { …(2) } } ]

- Expected
+ Received

- [
-   {
-     "properties": {
-       "tags": [
-         {
-           "color": "#000",
-           "name": "tag1",
-         },
-       ],
-       "thought_bubble_id": "01HN5G4K8PMXQ0VGWX7CTBZ3YV",
-     },
-   },
- ]
+ []

 ❯ src/services/__tests__/graphService.test.js:17:21
     15|   test('findThoughtsByTag returns thoughts with matching tag', async () => {
     16|     const results = await graphService.findThoughtsByTag('tag1');
     17|     expect(results).toEqual([{ properties: mockThoughts[0] }]);
       |                     ^
     18|   });
     19| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/18]⎯

 FAIL  src/utils/__tests__/eventBus.test.js > eventBus > IDs follow expected format
AssertionError: expected 'thought_1750480612288_k5xdb2c8j' to match /^tb_[a-zA-Z0-9]+$/

- Expected: 
/^tb_[a-zA-Z0-9]+$/

+ Received: 
"thought_1750480612288_k5xdb2c8j"

 ❯ src/utils/__tests__/eventBus.test.js:21:22
     19|     const bubbleId = newBubbleId();
     20|     const segmentId = newSegmentId();
     21|     expect(bubbleId).toMatch(/^tb_[a-zA-Z0-9]+$/);
       |                      ^
     22|     expect(segmentId).toMatch(/^seg_[a-zA-Z0-9]+$/);
     23|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/18]⎯


 Test Files  9 failed (9)
      Tests  13 failed | 3 passed (16)
   Start at  04:36:50
   Duration  2.81s

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
Cancelling test run. Press CTRL+c again to exit forcefully.

